<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><title>jQuery UI Touch Punch - Mobile Device Touch Event Support for jQuery UI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">

	<link rel="stylesheet" type="text/css" href="css/dragdrop3.css" />
	<link rel="stylesheet" type="text/css" href="stopwatch3.css" media="all" />
	
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script>
	<script type="text/javascript" src="https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>

  <script>
  $(function(){
    var socket = io.connect();
    socket.on('connect', function () {

			
			socket.on('splitsdatalive', function(thesplittimes) {
			// need to convert object
console.log('viewdata html real time display');
console.log(thesplittimes);	
splitjsondata =  JSON.parse(thesplittimes);
console.log(splitjsondata);

theevent = splitjsondata['swimstatus']['swimdate'] + ' ' + splitjsondata['swimstatus']['swimdistance'] + ' ' + splitjsondata['swimstatus']['swimsplit'] + ' ' + splitjsondata['swimstatus']['swimstroke'] + ' ' + splitjsondata['swimstatus']['swimtechnique'];
			
					$('#swimeventlive').append($('<li></li>').text(theevent));
					
					// itterate over each live swimmer
					var swimids = Object.keys(splitjsondata['splitdata']);
					swimids.forEach(function(perswimmer) {
					
        $('#swimdatalive').append($('<li></li>').text(perswimmer + '  ' + splitjsondata['splitdata'][perswimmer]));
				
					});
      });
			
      socket.on('disconnect', function() {
        $('#swimdatalive').append('<li>Disconnected</li>');
      });
    });

  });
  </script>


	</head>
	
	<body>
	<div class="container">
	<h1>Real time swim display</h1>
	<div id="messagelive"></div>
	<div id="swimeventlive"></div>
	<div id="swimdatalive"></div>

  </div> <!-- closes container-->

		<script type="text/javascript" src="jquery.scrollTo-min.js"></script>
		<script type="text/javascript" src="stopwatch3.js"></script>

  </body>
  </html>
  